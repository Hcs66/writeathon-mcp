# 概述

🎉各位开发者好\~

集成前请仔细阅读该文档，有任何疑问请邮件<690090@qq.com>或微信w690090。

## 基本信息

* **接口公共地址**：`https://api.writeathon.cn`
* **请求信息格式**：`JSON`
* **响应信息格式**：`JSON`

> **所有请求必须在请求头**（request header）加入`x-writeathon-token`参数，其值为用户提供的**集成Token**（由用户自主生成），否则校验失败
> 接口中的`用户id`可在**设置**→**集成**中获取

## 响应信息结构

| 参数        | 说明                        |
| --------- | ------------------------- |
| success   | 请求状态，true/false           |
| data      | 返回数据（json对象），具体信息见各接口返回参数 |
| action    | 接口行为，具体信息见各接口信息           |
| errorCode | 错误码，请求失败时返回，见错误码说明        |
| message   | 错误信息，请求失败时返回              |

## 错误码

| 错误码  | 说明          |
| ---- | ----------- |
| 1000 | 未分类异常       |
| 1001 | 没有高级版权限     |
| 1002 | 没有提供集成Token |
| 1003 | 集成Token不存在  |
| 1004 | 没有权限        |
| 1005 | 项目不存在       |

# 接口

## 1. 获取用户基本信息

### 1.1 接口信息

* **接口地址**：`/v1/me`
* **请求方式**：`GET`
* **接口行为**：`me`

### 1.2 请求参数

无

### 1.3 返回参数

| 参数       | 类型  | 说明   |
| -------- | --- | ---- |
| id       | 字符串 | 用户id |
| username | 字符串 | 用户名  |

## 2. 创建卡片

### 2.1 接口信息

* **接口地址**：`/v1/users/:id/cards`，`:id`为用户id
* **请求方式**：`POST`
* **接口行为**：`create`：添加时返回，`append`：追加时返回

### 2.2 请求参数

| 参数      | 类型  | 是否必填 | 说明                                                  |
| ------- | --- | ---- | --------------------------------------------------- |
| title   | 字符串 | 否    | 卡片标题，若为空则自动创建，若存在则会追加内容到指定卡片，最大长度100个字符（1个中文字算1个字符） |
| content | 字符串 | 是    | 卡片内容，最大长度5000个字符（1个中文字算1个字符）                        |

### 2.3 返回参数

无

## 3. 获取最近更新的卡片列表

### 3.1 接口信息

* **接口地址**：`/v1/users/:id/cards/recent`，`:id`为用户id
* **请求方式**：`GET`
* **接口行为**：`recent_card_list`
* **备注**：返回最近修改的10个卡片列表，包括**标题**和**id**信息

### 3.2 请求参数

| 参数                   | 类型 | 是否必填 | 说明                             |
| -------------------- | -- | ---- | ------------------------------ |
| exclude\_date\_title | 布尔 | 否    | 是否排除日期类型标题（一般为系统自动生成），默认为false |

### 3.3 返回参数

返回**对象数组**类型，对象属性如下：

| 参数    | 类型  | 说明   |
| ----- | --- | ---- |
| \_id  | 字符串 | 卡片id |
| title | 字符串 | 卡片标题 |

## 4. 获取卡片

### 4.1 接口信息

* **接口地址**：`/v1/users/:id/cards/get`，`:id`为用户id
* **请求方式**：`POST`
* **接口行为**：`get_card`

### 4.2 请求参数

| 参数    | 类型  | 是否必填         | 说明 |
| ----- | --- | ------------ | -- |
| title | 字符串 | title和id必填其一 | 标题 |
| id    | 字符串 | title和id必填其一 | id |

### 4.3 返回参数

返回**对象**类型，对象属性如下：

| 参数      | 类型  | 说明   |
| ------- | --- | ---- |
| \_id    | 字符串 | 卡片id |
| title   | 字符串 | 卡片标题 |
| content | 字符串 | 卡片内容 |
| created | 日期  | 创建时间 |
| updated | 日期  | 更新时间 |

## 5. 写作拾贝

### 5.1 接口信息

* **接口地址**：`/v1/users/:id/writing-pick`，`:id`为用户id
* **请求方式**：`POST`
* **接口行为**：`writing_pick`

### 5.2 请求参数

| 参数    | 类型  | 是否必填 | 说明                      |
| ----- | --- | ---- | ----------------------- |
| type  | 字符串 | 否    | 类型，all/page/card，默认为all |
| limit | 数字  | 否    | 返回数量，1-10，默认：10         |

### 5.3 返回参数

返回**列表对象**类型，对象属性如下：

| 参数      | 类型  | 说明   |
| ------- | --- | ---- |
| id      | 字符串 | id   |
| title   | 字符串 | 标题   |
| content | 字符串 | 内容   |
| created | 日期  | 创建时间 |
| updated | 日期  | 更新时间 |
| type    | 字符串 | 类型   |

